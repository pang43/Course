# **Image processing**

> 徐宇恒 1120151839
>
> 2017年1月10日

[TOC]

# **Background**

# Superpixel

### Introduction 

+ 超像素是将数字图像细分为多个图像子区域（像素的集合）（也被称作超像素）的过程。超像素	由一系列位置相邻且颜色、亮度、纹理等特征相似的像素点组成的小区域。这些小区域大多保留了进一步进行图像分割的有效信息，且一般不会破坏图像中物体的边界信息。


+ 图像分割的结果是图像上子区域的集合（这些子区域的全体覆盖了整个图像），或是从图像中提取的轮廓线的集合（例如边缘检测）。一个子区域中的每个像素在某种特性的度量下或是由计算得出的特性都是相似的，例如颜色、亮度、纹理。邻接区域在某种特性的度量下有很大的不同。


+ 简单说就是对图像进行分割后得到一些大小不一的区域，从区域中可以提取有效信息（颜色直方图，文理信息）

### Classification

  ![1](1.png)

### SLIC Algorithm

+ 优点：速度较快，能够生成紧凑、近似均匀的超像素
+ 初始化种子点。假设图像有N个像素点，预计分割为K个相同的尺寸的超像素。那么每个超像素的大小为N/K，为每个种子分配一个单独的标签
+ 相似度量衡。对于每个像素点，分别计算与之距离最近的种子点之间的相似程度，将最相似的种子点的标签赋予该像素点，不断迭代该过程直到收敛。
+ 为了提高算法的运算速度，对每个种子聚点类时，只在以种子点为中心的2S*2S区域内搜索相似的像素点，而不是在整整图中寻找。

## Random Walk

### Introduction	

+ 随机游走（random walk）也称随机漫步，随机行走等是指基于过去的表现，无法预测将来的发展步骤和方向。核心概念是指任何无规则行走者所带的守恒量都各自对应着一个扩散运输定律 ，接近于布朗运动，是布朗运动理想的数学状态。

### Algorithm

+ 设f(x)是一个含有n个变量的多元函数,x=(x_1,x_2,...,x_n)为n维向量。

1. 给定初始迭代点x，初次行走步长\lambda，控制精度\epsilon(\epsilon是一个非常小的正数，用于控制结束算法)。
2. 给定迭代控制次数N，k为当前迭代次数，置k=1。
3. 当 k<N时，随机生成一个(-1,1)之间的n维向量u = (u_1,u_2,\cdots,u_n),(-1<u_i<1,i=1,2,\cdots,n)，并将其标准化得到u^{'} = \frac{u}{\sqrt{\sum_{i=1}^{n} u_i ^2 }}。令x_1 = x + \lambda u^{'}，完成第一步游走。
4. 计算函数值，如果 f(x_1)<f(x)，即找到了一个比初始值好的点，那么k重新置为1，将x_1变为x，回到第2步；否则k = k+1，回到第3步。
5. 如果连续N次都找不到更优的值，则认为，最优解就在以当前最优解为中心，当前步长为半径的N维球内(如果是三维，则刚好是空间中的球体)。此时，如果\lambda < \epsilon，则结束算法；否则，令\lambda = \frac{\lambda}{2}，回到第1步，开始新一轮游走。

### The Application of Random Walk in Image Processing

* 随机游走算法是一种基于图论的分割算法，属于一种交互式的图像分割。它的分割思想是，以图像的像素为图的顶点，相邻像素之间的四邻域或八邻域关系为图的边，并根据像素属性及相邻像素之间特征的相似性定义图中各边的权值，以此构建网络图，然后由通过用户手工指定前景和背景标记，即前景物体和背景物体的种子像素，以边上的权重为转移概率，未标记像素节点为初始点，计算每个未标记节点首次到达各种子像素的概率，根据概率大小，划分未标记节点，得到最终分割结果。

# Lazy Random Walks for Superpixel Segmentation

## Abstract

本文主要介绍了一种基于懒惰随机游走的图像超像素分割算法。优化了超像素的迭代过程，采用了新的全局概率图和通勤时间策略。

## Works

### Introduction

+ 超像素分割的目标是将输入图像分割成均匀且紧凑的区域。可以视为一个像素标记问题。为每个超像素分配一个标签

### Algorithm

+ 初始化种子的分类处理
+ 使用懒惰随机游走（LRW）获得初始超像素及其边界
+ 设计能量优化算法来优化种子位置和边界的确定。
+ 超像素分割
  - 使用LRW算法的初始种子点来获得超像素
    * 能量算法对数据进行处理使得种子的位置分布更均匀
    * 将纹理边缘不规则的大超像素划分成正常的图
  - 再次使用LRW算法获得新中农工资的位置
  - 迭代执行该过程



# Video Supervoxels Using Partially

## Abstract

本文提出了一种新的通过利用随机漫步来得到更准确的视频超像素生成算法，弥补大多数传统超体素算法对于复杂纹理或弱边界表现不佳的情况。本文在如下几个方面做了改进

+ 构建了一种新的时空框架，将超体素划分到两个相邻帧上，不仅保证了分割效果而且降低了算法的复杂度。
+ 应用光流信息在帧信息之间的传递过程，通过将上一帧信息来引导当前帧的分割，种子在上一帧和下一帧之间传递，保证了超提速在时间上的连续性和空间上的一致性。
+ 建立了利用视频序列的外观特征和运动信息求解的拉普拉斯结构。
+ 在每一帧内和两帧之间计算颜色和光流信息使得，更准确的贴合对象边界的超体素。
+ 使用PARW随机游走算法，在复杂纹理和弱边界区域有更好的表现

## Works

### Object segmentation and hyperbody segmentation

#### Introduction

本部分介绍一些基础算法和实现思路

#### Algorithm

1. 视频对象分割算法：

   + 一帧一阵处理，每帧独立分割
     * 优点：高效
     * 缺点：每一帧处理缺少联系分割结果时间相关性不理想


+ 线性流处理，在先前处理的帧上分割当前帧。
+ 基于整段视频序列处理。
     * 优点：效果好
     * 缺点：复杂度高

1. 随机游走算法：见Background

2. 视频对象分割算法：

   + 使用超像素作为线索，使用不同的分割算法改变生成超像素的参数，有效地利用图像的复杂结构和信息。
   + 利用二分图分区框架，将像素和超像素融合在一起，得到平滑的分割线线索。通过计算随机游走算法分割得到结果。

3. 超像素分割：

   + 本文提出了一种利用部分吸收的随机游走算法生成视频超体素分割的时空框架。使得分割出的超体素更好的品质、并且紧凑、结构均匀。
   + 利用新建立的拉普拉斯结构矩阵，超体素分割在连个相邻帧执行，而不是处理整个视频帧。种子通过光流将被自动转播到下一帧，使得时间一致性保持的非常好。

### Video object segmentation algorithm based on random walk

#### Introduction

对于视频分割如何保持稳定性是一个重要的问题。所以当分割移动物体时容易将本属于该物体的一部分去掉。本文解决的思路是在输入一份图像时将其分割成6层超像素。使用随机游走算法分割出移动物体。

#### Algorithm

+ 二分图：对每一帧单独分割出他们的超像素结果。


+ 随机游走：对相邻几帧的超像素使用随机游走算法，分割得到最后的视频对象

### Video hyperbody segmentation based on PARW

#### Introduction

本部分提出了一种基于时空信息的视频超体素分割算法。使用部分吸收的随机游走（PARW）执行分割。对每一帧进行两次PARW分割。第一次得到初始结果，第二次分割对初始结果进行优化。并且用用上一章提到的新构建的拉普拉斯优化结构既保持了时空上的连续性，也使得边缘部分的贴合更好。

#### Algorithm

+ 部分吸收的随机游走算法
  + 在区域内的吸收率变化很小，到区域外它的可导性下降很快。当一个随机游走从一个区域出发在合适的吸收率下最终有可能被吸收停留到区域中。
+ 拉普拉斯结构
  + 实现了记录每一点的外观特征和运动特征
+ 部分随机游走分割
  + 利用没一帧的种子点进行随机游走分割。仅仅在第一帧定义种子点，后续帧的种子只从前一帧的分割结果得到。
+ 超像素时空优化
  + 进一步完善超体素颜色和纹理的同质性要求。

# Sub-Markov Random Walk for Image Segmentation

## Abstract

本文提出了一张新的随机游走算法Sub-Markov Random Walk，创新之处在于对传统的随机游走算法添加辅助接点。并且与其他随机游走算法保持统一有利于相互之间传递结果， 并且为增加或改变辅助节点设计新的RW算法提供了新的思路。



# Benefit from Image Processing

​	本学期的图像处理课程已经结束。回顾这8周左右的学习感受良多。沈老师不同于其他老师照本宣科，而是让我们多多动手实践，这一点让我十分敬佩。而我也在两次大作业中学到了一些真知识。第一次大作业的叫苦连天到第二次翻阅资料努力尝试，期间为实现项目编写代码总量接近2000行。虽然作业的结果还有很多不尽人意的地方，但是在一次次debug后终于跑出成果还是很开心的！感谢沈老师的尽心竭力！

​	最后，学以致用，空闲时间仿照网上实例复现了人脸识别自动添加圣诞帽的算法，送给老师。祝老师新年快乐，万事如意，桃李满天下！

 ![out](C:\Application\crossin\out.png)  

